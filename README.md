# 宏观经济分析投资决策系统

这个项目旨在通过抓取指定网站的RSS和新闻API来分析宏观事件对经济的影响，进而分析对GDP、利率、汇率等经济指标的影响，最终对股票和大宗商品价格的影响。该系统可以与现有的DCF估值模型和商品供需预测模型整合，提供更全面的投资决策支持。

## 项目结构

```
macro_investment_analyzer/
├── __init__.py                  # 包初始化文件
├── main.py                      # 主程序入口
├── README.md                    # 项目说明文档
├── config/                      # 配置文件目录
│   ├── __init__.py
│   └── config_template.yaml     # 配置模板
├── data_sources/                # 数据源模块
│   ├── __init__.py
│   ├── rss_fetcher.py           # RSS数据抓取
│   ├── news_api_fetcher.py      # NewsAPI数据抓取
│   └── data_processor.py        # 数据预处理
├── analysis/                    # 分析模块
│   ├── __init__.py
│   ├── keyword_filter.py        # 关键词过滤
│   ├── sentiment_analyzer.py    # 情绪分析
│   ├── quantitative_analyzer.py # 量化分析
│   └── historical_analyzer.py   # 历史数据分析
├── models/                      # 模型整合模块
│   ├── __init__.py
│   ├── dcf_integrator.py        # DCF模型整合
│   ├── commodity_integrator.py  # 商品模型整合
│   └── attribution_model.py     # 投资归因分析
├── database/                    # 数据库模块
│   ├── __init__.py
│   ├── db_connector.py          # 数据库连接器
│   └── schema.sql               # 数据库结构定义
├── utils/                       # 工具模块
│   ├── __init__.py
│   ├── logger.py                # 日志工具
│   └── helpers.py               # 辅助函数
└── tests/                       # 测试模块
    └── __init__.py
```

## 功能模块说明

### 1. 配置模块 (config/)

配置模块负责加载和管理系统配置，包括数据源设置、分析参数、数据库连接等。配置采用YAML格式，便于阅读和修改。

### 2. 数据源模块 (data_sources/)

数据源模块负责从各种来源获取原始数据，主要包括：
- RSS数据抓取：从彭博社、路透社等金融新闻RSS源获取数据
- NewsAPI数据抓取：通过NewsAPI获取更广泛的新闻数据
- 数据预处理：清洗和标准化获取的数据，为后续分析做准备

### 3. 分析模块 (analysis/)

分析模块负责对获取的数据进行多维度分析，包括：
- 关键词过滤：识别与特定经济事件相关的新闻（如"关税"、"贸易政策"等）
- 情绪分析：使用TextBlob等工具分析新闻情绪
- 量化分析：将定性信息转化为定量指标
- 历史数据分析：将当前事件与历史类似事件进行比对，推导可能的影响

### 4. 模型整合模块 (models/)

模型整合模块负责将分析结果与现有投资模型整合：
- DCF整合器：将宏观分析结果转化为DCF模型的输入参数（如折现率调整）
- 商品整合器：将宏观分析结果转化为商品供需预测的输入
- 归因分析：评估投资决策的结果，并分析宏观因素的贡献

### 5. 数据库模块 (database/)

数据库模块负责数据的持久化存储和查询，使用MySQL数据库：
- 存储新闻文章和分析结果
- 记录宏观事件及其影响
- 保存投资决策和归因分析结果

### 6. 工具模块 (utils/)

工具模块提供各种辅助功能：
- 日志记录
- 错误处理
- 通用辅助函数

## 工作流程

1. 系统定期从配置的数据源获取最新数据
2. 对获取的数据进行预处理和分析
3. 识别潜在的宏观经济事件及其影响
4. 将分析结果整合到DCF模型和商品供需预测中
5. 生成投资建议和调整
6. 记录投资决策和结果
7. 进行归因分析，评估宏观因素的影响

## 使用方法

1. 复制并修改配置模板 `config_template.yaml`
2. 配置数据源和分析参数
3. 运行主程序 `python main.py`
4. 查看生成的分析报告和投资建议

## 数据库设计

系统使用MySQL数据库存储数据，主要表结构包括：
- 新闻文章表：存储从RSS和NewsAPI获取的原始新闻
- 关键词匹配表：记录新闻中的关键词匹配情况
- 情绪分析表：存储新闻的情绪分析结果
- 宏观事件表：记录识别出的宏观经济事件
- 经济指标表：存储各种经济指标数据
- 事件影响表：记录宏观事件对各指标的影响分析
- DCF调整表：记录对DCF模型参数的调整
- 商品调整表：记录对商品供需预测的调整
- 投资决策表：记录基于分析做出的投资决策
- 投资归因表：记录投资结果的归因分析

详细的表结构定义见 `database/schema.sql` 文件。
